<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CommonLibSSE NG: CommonLibSSE NG</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CommonLibSSE NG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__common_lib_s_s_e__n_g__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">CommonLibSSE NG </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://en.cppreference.com/w/cpp/compiler_support"><img src="https://img.shields.io/static/v1?label=standard&amp;message=c%2B%2B20&amp;color=blue&amp;logo=c%2B%2B&amp;&amp;logoColor=white&amp;style=flat" alt="C++23" class="inline"/></a> <img src="https://img.shields.io/static/v1?label=platform&amp;message=windows&amp;color=dimgray&amp;style=flat&amp;logo=windows" alt="Platform" class="inline"/> ![Latest Release](https://img.shields.io/github/v/release/CharmedBaryon/CommonLibSSE-NG?logo=pkgsrc&amp;logoColor=white) <a href="https://github.com/CharmedBaryon/CommonLibSSE-NG/actions/workflows/main_ci.yml"><img src="https://img.shields.io/github/workflow/status/CharmedBaryon/CommonLibSSE-NG/Main%20CI/main?logo=github&amp;label=tests" alt="Main CI" class="inline"/></a></p>
<p>CommonLibSSE NG is a fork of CommonLibSSE which tracks upstream updates but adds a number of enhancements.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
New Features</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Multiple Runtime Targets</h2>
<p><img src="https://img.shields.io/static/v1?label=stability&amp;message=stable&amp;color=dimgreen&amp;style=flat" alt="stability" class="inline"/></p>
<p>CommonLibSSE NG has support for Skyrim SE, AE, and VR, and is able to create builds for any combination of these runtimes, including all three. This makes it possible to create <a class="el" href="namespace_s_k_s_e.html">SKSE</a> plugins with a single DLL that works in any Skyrim runtime, improving developer productivity (only one build and CMake preset necessary) and improving the end-user experience (no need to make a choice of multiple download options or select the right DLL from a FOMOD). For Skyrim AE, both versions before 1.6.629 and those after are supported in a single DLL (both struct layouts are supported).</p>
<p>Builds that target multiple ABI-incompatible runtimes provide the necessary (but minimal) abstractions needed to work transparently regardless of the Skyrim edition in use. All functionality and classes from all runtimes is always available for potential use, with the necessary support for probing the features available. This allows single plugins that dynamic alter their behavior to take advantage of the specific features of a single Skyrim edition (e.g. VR features) when that runtime is present.</p>
<p><a href="https://github.com/CharmedBaryon/CommonLibSSE-NG/wiki/Runtime-Targeting">Read about multi-targeting, and how you can take advantage in your project.</a></p>
<h2><a class="anchor" id="autotoc_md4"></a>
Simplified Plugin Declaration</h2>
<p><img src="https://img.shields.io/static/v1?label=stability&amp;message=stable&amp;color=dimgreen&amp;style=flat" alt="stability" class="inline"/></p>
<p>Historically, plugins needed to define <code>SKSEPlugin_Version</code> or <code>SKSEPlugin_Query</code> to be detected as <a class="el" href="namespace_s_k_s_e.html">SKSE</a> plugins. To simplify code and ensure both functions are generated for correct cross-runtime compatibility, this is made code-free in CommonLibSSE NG. Just replace <code>add_library</code> with <code>add_commonlibsse_plugin</code> in <code>CMakeLists.txt</code> and CMake will create your shared library target, configure CommonLibSSE linkage, and auto-generate this content and inject it into the plugin.</p>
<div class="fragment"><div class="line">find_package(CommonLibSSE REQUIRED)</div>
<div class="line"> </div>
<div class="line">add_commonlibsse_plugin(${PROJECT_NAME}</div>
<div class="line">    SOURCES ${headers} ${sources})</div>
</div><!-- fragment --><p><a href="https://github.com/CharmedBaryon/CommonLibSSE-NG/wiki/Runtime-Targeting#cmake-integration">Read more on the project wiki.</a></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Clang Support</h2>
<p><img src="https://img.shields.io/static/v1?label=stability&amp;message=beta&amp;color=yellow&amp;style=flat" alt="stability-beta" class="inline"/></p>
<p>Clang 13.x and newer are supported when built for MSVC ABI compatibility (versions built natively for Windows). It is even hypothetically possible, with the proper setup, to cross-compile with Clang from a Linux host (testing and instructions for this are pending). Note that currently linking must still be done with the Microsoft linker, pending fixes to <a class="el" href="namespace_s_k_s_e.html">SKSE</a> itself.</p>
<p><a href="https://github.com/CharmedBaryon/CommonLibSSE-NG/wiki/Compiling-with-Clang">Read more on the project wiki.</a></p>
<h2><a class="anchor" id="autotoc_md6"></a>
Unit Testing Enhancements</h2>
<p><img src="https://img.shields.io/static/v1?label=stability&amp;message=stable&amp;color=dimgreen&amp;style=flat" alt="stability-stable" class="inline"/></p>
<p>Improvements have been made to the way in which the Skyrim executable module is accessed for the sake of memory relocation and handling of Address Library IDs. This makes it easier to run CommonLibSSE-based plugin code outside of the context of a Skyrim process so that unit testing is possible. It is even possible to handle a minimal level of functionality from the engine by loading in a Skyrim executable module programmatically during testing, allowing, for example, tests to be run within a single test suite that vary between SE, AE, and VR executables.</p>
<p><a href="https://github.com/CharmedBaryon/CommonLibSSE-NG/wiki/Unit-Testing">Read more on the project wiki.</a></p>
<h2><a class="anchor" id="autotoc_md7"></a>
Versioned Releases via Vcpkg and Conan</h2>
<p><img src="https://img.shields.io/static/v1?label=vcpkg&amp;message=stable&amp;color=dimgreen&amp;style=flat" alt="stability-stable" class="inline"/></p>
<p><img src="https://img.shields.io/static/v1?label=conan&amp;message=experimental&amp;color=orange&amp;style=flat" alt="stability-experimental" class="inline"/></p>
<p>Traditionally CommonLibSSE is consumed via a Git submodule; this practice generally requires the project using it to add CommonLibSSE's own Vcpkg dependencies and parts of it CMake configuration, as CommonLibSSE is built as a part of the plugin project. CommonLibSSE NG instead uses specific releases with semantic versioning, and distributes them as their own Vcpkg ports, through the <a href="https://gitlab.com/colorglass/vcpkg-colorglass">Color-Glass Studios Vcpkg repository</a>. As a result, it is simpler to use, does not require absorbing transitive requirements into your own project, and needs only be built once (cleaning will not require rebuilding CommonLibSSE, only your own code).</p>
<p>In addition, starting with version 3.5.0, CommonLibSSE NG can now be both built and consumed via the Conan package manager, both as a source build or prebuilt packages targeting Windows on x86_64 with Visual Studio compiler versions 16 and 17 (2019 and 2022).</p>
<p>See how to use CommonLibSSE NG in your project.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Ninja Builds</h2>
<p><img src="https://img.shields.io/static/v1?label=stability&amp;message=stable&amp;color=dimgreen&amp;style=flat" alt="stability-stable" class="inline"/></p>
<p>CommonLibSSE NG migrates the build system to Ninja, resulting in faster parallel builds than NMake.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Other Changes</h1>
<ul>
<li>Ability to define offsets and address IDs for objects which can exist in only a subset of runtimes, while being able dynamically test for feature support before using those offsets.</li>
<li>Completely regenerated RTTI and vtable offsets, now with consistent naming and access across all runtimes.</li>
<li>Updated GitHub Actions CI workflows to build for all likely target runtime combinations.</li>
<li>Fully extensible native function binding traits (enables custom script object bindings in <a href="https://gitlab.com/colorglass/fully-dynamic-game-engine">Fully Dynamic Game Engine</a>).</li>
<li>Better support for the CLion IDE.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Use</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Via Vcpkg</h2>
<p>CommonLibSSE NG is available as a Vcpkg port. To add it to your project, create a <code>vcpkg-configuration.json</code> file in the project root (next to <code>vcpkg.json</code>) with the following contents:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;registries&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">            &quot;repository&quot;: &quot;https://gitlab.com/colorglass/vcpkg-colorglass&quot;,</div>
<div class="line">            // Update this baseline to the latest commit from the above repo.</div>
<div class="line">            &quot;baseline&quot;: &quot;9eae9f03f03e0ca96fce5031f44f4e64cd6debdc&quot;,</div>
<div class="line">            &quot;packages&quot;: [</div>
<div class="line">                &quot;commonlibsse-ng&quot;,</div>
<div class="line">                &quot;commonlibsse-ng-ae&quot;,</div>
<div class="line">                &quot;commonlibsse-ng-se&quot;,</div>
<div class="line">                &quot;commonlibsse-ng-vr&quot;,</div>
<div class="line">                &quot;commonlibsse-ng-flatrim&quot;</div>
<div class="line">            ]</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>Then add <code>commonlibsse-ng</code> as a dependency in <code>vcpkg.json</code>. There are also runtime-specific versions of the project:</p><ul>
<li><code>commonlibsse-ng-ae</code>: Supports AE executables (1.6.x) only.</li>
<li><code>commonlibsse-ng-se</code>: Supports pre-AE executables (1.5.x) only.</li>
<li><code>commonlibsse-ng-vr</code>: Supports VR only.</li>
<li><code>commonlibsse-ng-flatrim</code>: Support for SE/AE, but not VR.</li>
</ul>
<p>The runtime-specific ports will not attempt to dynamically lookup the version of Skyrim at runtime, and will enable access to reverse engineered content that is specific to that version of Skyrim and non-portable (i.e. it does not exist in all versions of Skyrim, or has not been reverse engineered on all versions of Skyrim).</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Via Conan</h2>
<p>CommonLibSSE NG is now available via Conan. Add it as a requirement to your project's <code>conanfile.txt</code> or <code>conanfile.py</code>:</p>
<div class="fragment"><div class="line">[requires]</div>
<div class="line">commonlibsse-ng/3.5.2</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">class </span>MyProject:</div>
<div class="line">    <span class="comment"># ...</span></div>
<div class="line">    requires = <span class="stringliteral">&#39;commonlibsse-ng/3.5.2&#39;</span></div>
</div><!-- fragment --><p>Update the version number to the version constraints you want. Conan support was added in version 3.5.0, making that the earliest version available. Currently Conan binaries are available for the following <code>build_type</code>/<code>arch</code>/<code>os</code>/<code>compiler</code>/<code>compiler.version</code> combinations:</p>
<ul>
<li>Debug/x86_64/Windows/Visual Studio/16</li>
<li>Debug/x86_64/Windows/Visual Studio/17</li>
<li>Release/x86_64/Windows/Visual Studio/16</li>
<li>Release/x86_64/Windows/Visual Studio/17</li>
</ul>
<p>Selective runtime support is handled via package options:</p>
<div class="fragment"><div class="line">[requires]</div>
<div class="line">commonlibsse-ng/3.5.2</div>
<div class="line"> </div>
<div class="line">[options]</div>
<div class="line">commonlibsse-ng:ae=True</div>
<div class="line">commonlibsse-ng:se=True</div>
<div class="line">commonlibsse-ng:vr=True</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">class </span>MyProject:</div>
<div class="line">    <span class="comment"># ...</span></div>
<div class="line">    requires = <span class="stringliteral">&#39;commonlibsse-ng/3.5.2&#39;</span></div>
<div class="line">    default_options = {</div>
<div class="line">      <span class="comment"># ...</span></div>
<div class="line">      <span class="stringliteral">&#39;commonlibsse-ng:with_ae&#39;</span>: <span class="keyword">True</span>,</div>
<div class="line">      <span class="stringliteral">&#39;commonlibsse-ng:with_se&#39;</span>: <span class="keyword">True</span>,</div>
<div class="line">      <span class="stringliteral">&#39;commonlibsse-ng:with_vr&#39;</span>: <span class="keyword">True</span></div>
<div class="line">    }</div>
</div><!-- fragment --><p>The above shows the default values (which includes support for all runtimes). Disable any runtimes you do not want.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Linking in CMake</h2>
<p>You should have the following in <code>CMakeLists.txt</code> to compile and link successfully: </p><div class="fragment"><div class="line">find_package(CommonLibSSE REQUIRED)</div>
<div class="line">target_link_libraries(${PROJECT_NAME} PUBLIC CommonLibSSE::CommonLibSSE)</div>
</div><!-- fragment --><p>For more information on how to use CommonLibSSE NG, you can look at the <a href="https://gitlab.com/colorglass/commonlibsse-sample-plugin">example plugin</a>.</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Build Dependencies</h1>
<ul>
<li><a href="https://fmt.dev/latest/index.html">fmt</a></li>
<li><a href="https://github.com/d99kris/rapidcsv">rapidcsv</a></li>
<li><a href="https://github.com/gabime/spdlog">spdlog</a></li>
<li><a href="https://visualstudio.microsoft.com/vs/">Visual Studio 2022</a><ul>
<li>Desktop development with C++</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
End User Dependencies</h1>
<ul>
<li><a href="https://www.nexusmods.com/skyrimspecialedition/mods/32444">Address Library for SKSE Plugins</a> or <a href="https://www.nexusmods.com/skyrimspecialedition/mods/58101">VR Address Library for SKSEVR</a></li>
<li><a href="https://skse.silverlock.org/">SKSE64</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
Development</h1>
<ul>
<li><a href="https://www.nexusmods.com/skyrimspecialedition/mods/32444">Address Library for SKSE Plugins</a> and <a href="https://www.nexusmods.com/skyrimspecialedition/mods/58101">VR Address Library for SKSEVR</a></li>
<li><a href="https://github.com/llvm/llvm-project/releases">clang-format 12.0.0</a></li>
<li><a href="https://cmake.org/">CMake</a></li>
<li><a href="https://conan.io">Conan</a> or <a href="https://github.com/microsoft/vcpkg">Vcpkg</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
Notes</h1>
<ul>
<li>CommonLib is incompatible with <a class="el" href="namespace_s_k_s_e.html">SKSE</a> and is intended to replace it as a static dependency. However, you will still need</li>
<li>the runtime component. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
